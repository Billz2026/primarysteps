<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Maths ‚Äì Primary Steps</title>
  <style>
    :root{
      --bg:#0b0d12;
      --panel:#121621;
      --panel2:#0f1320;
      --text:#eef2ff;
      --muted:#a9b2c7;
      --brand:#7dd3fc;
      --brand2:#a78bfa;
      --good:#34d399;
      --bad:#fb7185;
      --border:rgba(255,255,255,.10);
      --radius:18px;
      --shadow:0 12px 40px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%}
    body{
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(900px 500px at 20% 0%, rgba(125,211,252,.18), transparent 60%),
        radial-gradient(900px 500px at 85% 20%, rgba(167,139,250,.18), transparent 60%),
        var(--bg);
      color:var(--text);
    }

    /* Header */
    header{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(12px);
      background: rgba(18,22,33,.75);
      border-bottom:1px solid var(--border);
    }
    .topbar{
      max-width:1150px; margin:auto;
      padding:12px 18px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:var(--text)}
    .brand img{height:52px; width:auto; filter:drop-shadow(0 10px 25px rgba(125,211,252,.25))}
    .brand span{font-weight:750; font-size:14px; letter-spacing:.04em}
    .nav{display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end}
    .pill{
      text-decoration:none; color:var(--text);
      padding:9px 14px; border-radius:999px;
      background:rgba(15,19,32,.7);
      border:1px solid var(--border);
      font-size:13px; font-weight:600;
      transition:.2s ease;
      display:inline-flex; gap:8px; align-items:center; white-space:nowrap;
    }
    .pill:hover{transform:translateY(-1px); border-color:rgba(125,211,252,.35)}
    .pill strong{font-weight:850}

    /* Layout */
    .container{max-width:1150px; margin:auto; padding:28px 18px 60px}
    .hero{margin-bottom:18px}
    .hero h1{margin:0 0 6px; font-size:clamp(22px,3vw,30px); letter-spacing:.2px}
    .hero p{margin:0; color:var(--muted); font-size:14px; line-height:1.45}
    .panel{
      background:linear-gradient(180deg, rgba(18,22,33,.95), rgba(11,13,18,.85));
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:22px;
    }

    .grid{display:grid; gap:14px}
    .row{display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:space-between}
    .chip{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      color:var(--text);
      font-size:13px; font-weight:700;
    }
    .select{
      appearance:none;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(15,19,32,.8);
      color:var(--text);
      padding:10px 12px;
      font-weight:750;
      font-size:13px;
      outline:none;
    }

    /* Activity card */
    .card{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(15,19,32,.72);
      padding:16px;
    }
    .titleRow{display:flex; align-items:flex-start; justify-content:space-between; gap:12px}
    .title{margin:0; font-weight:900; letter-spacing:.2px}
    .sub{margin:6px 0 0; color:var(--muted); font-size:13px; line-height:1.4}
    .mini{color:rgba(238,242,255,.65); font-size:12px}

    .problem{
      margin-top:14px;
      padding:18px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(800px 260px at 20% 0%, rgba(125,211,252,.10), transparent 60%),
        rgba(255,255,255,.04);
      display:grid;
      gap:12px;
      align-items:center;
    }
    .equation{
      display:flex; align-items:center; justify-content:center; gap:12px; flex-wrap:wrap;
      font-weight:950;
      letter-spacing:.3px;
      font-size:clamp(26px,5vw,40px);
    }
    .eqBox{
      min-width:76px;
      padding:10px 14px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(11,13,18,.55);
      display:inline-flex;
      justify-content:center;
      align-items:center;
      box-shadow:0 10px 22px rgba(0,0,0,.25);
    }
    .choices{
      display:grid;
      grid-template-columns:repeat(3, minmax(0,1fr));
      gap:10px;
      margin-top:6px;
    }
    .choice{
      cursor:pointer;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      padding:14px 12px;
      font-weight:900;
      font-size:18px;
      color:var(--text);
      transition:.18s ease;
      user-select:none;
    }
    .choice:hover{transform:translateY(-1px); border-color:rgba(125,211,252,.35); background:rgba(125,211,252,.10)}
    .choice[disabled]{opacity:.55; cursor:not-allowed; transform:none}
    .choice.good{
      border-color:rgba(52,211,153,.6);
      background:rgba(52,211,153,.12);
      box-shadow:0 10px 26px rgba(52,211,153,.10);
    }
    .choice.bad{
      border-color:rgba(251,113,133,.6);
      background:rgba(251,113,133,.12);
    }

    .actions{display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:10px}
    .btn{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 14px;
      border-radius:999px;
      font-weight:850;
      font-size:13px;
      cursor:pointer;
      transition:.2s ease;
    }
    .btn:hover{transform:translateY(-1px); border-color:rgba(125,211,252,.35); background:rgba(125,211,252,.10)}
    .btn.primary{
      border-color:rgba(125,211,252,.40);
      background:rgba(125,211,252,.14);
    }
    .btn.primary:disabled{opacity:.55; cursor:not-allowed; transform:none}

    .status{
      text-align:center;
      color:var(--muted);
      font-size:13px;
      min-height:20px;
    }

    @media (max-width:520px){
      .brand span{display:none}
      .choices{grid-template-columns:repeat(2, minmax(0,1fr))}
    }
  </style>
</head>
<body>

<header>
  <div class="topbar">
    <a href="index.html" class="brand">
      <img src="assets/primary-steps-logo.png" alt="Primary Steps">
      <span>Primary Steps</span>
    </a>
    <nav class="nav">
      <a class="pill" href="index.html">Home</a>
      <a class="pill" href="letters.html">Letters</a>
      <a class="pill" href="numbers.html">Numbers</a>
      <a class="pill" href="phonics.html">Phonics</a>
      <a class="pill" href="games.html">Games</a>
      <a class="pill" href="puzzles.html">Puzzles</a>
      <a class="pill" href="clock.html">Clock</a>

      <a class="pill" href="settings.html">Settings</a>
      <a class="pill" href="progress.html">‚≠ê <strong id="starsCount">0</strong></a>
    </nav>
  </div>
</header>

<main class="container">
  <section class="hero">
    <h1>Maths</h1>
    <p>Calm, confidence-building maths games. Tap an answer, then choose Next when you‚Äôre ready.</p>
  </section>

  <section class="panel">
    <div class="grid">

      <div class="row">
        <div class="chip">üéØ Mode:
          <select class="select" id="modeSel" aria-label="Mode">
            <option value="add">Addition</option>
            <option value="sub">Subtraction</option>
            <option value="mix">Mixed</option>
          </select>
        </div>

        <div class="chip">üì∂ Range:
          <select class="select" id="rangeSel" aria-label="Range">
            <option value="5">1‚Äì5</option>
            <option value="10" selected>1‚Äì10</option>
            <option value="20">1‚Äì20</option>
          </select>
        </div>

        <div class="chip">‚≠ê Stars: <strong id="starsInline">0</strong></div>
      </div>

      <div class="card" id="activityCard">
        <div class="titleRow">
          <div>
            <h2 class="title">Quick Sums</h2>
            <p class="sub">Choose the correct answer. Next unlocks after a correct tap.</p>
          </div>
          <div class="mini" id="hintMini">No timers ‚Ä¢ No auto-skip</div>
        </div>

        <div class="problem">
          <div class="equation" aria-live="polite">
            <span id="aVal">2</span>
            <span id="opVal">+</span>
            <span id="bVal">3</span>
            <span>=</span>
            <span class="eqBox" id="blankVal">?</span>
          </div>

          <div class="choices" id="choices"></div>

          <div class="status" id="statusText">Tap an answer to begin.</div>

          <div class="actions">
            <button class="btn" id="newBtn" type="button">New Question</button>
            <button class="btn primary" id="nextBtn" type="button" disabled>Next</button>
          </div>
        </div>
      
      <div class="card" id="moreCard" style="margin-top:14px;">
        <div class="titleRow">
          <div>
            <h2 class="title">More Activities</h2>
            <p class="sub">Jump into other calm activities that match the same Primary Steps theme.</p>
          </div>
          <div class="mini">Quick links</div>
        </div>

        <div class="problem" style="padding:16px;">
          <div class="row" style="justify-content:flex-start;">
            <a class="btn primary" href="clock.html">üïí Clock (Set + Read)</a>
            <a class="btn" href="puzzles.html">üß© Puzzles (5 levels)</a>
            <a class="btn" href="games.html">üéÆ Games (Connect 4)</a>
          </div>
          <div class="status">Tip: keep it short ‚Äî a few minutes at a time is perfect.</div>
        </div>
      </div>
</div>

    </div>
  </section>
</main>

<script>
(function(){
  const starsKey = "ps_stars";
  const starsCount = document.getElementById("starsCount");
  const starsInline = document.getElementById("starsInline");

  function getStars(){ return Number(localStorage.getItem(starsKey) || "0"); }
  function setStars(n){
    localStorage.setItem(starsKey, String(n));
    if(starsCount) starsCount.textContent = String(n);
    if(starsInline) starsInline.textContent = String(n);
  }
  setStars(getStars());

  const modeSel = document.getElementById("modeSel");
  const rangeSel = document.getElementById("rangeSel");
  const aVal = document.getElementById("aVal");
  const bVal = document.getElementById("bVal");
  const opVal = document.getElementById("opVal");
  const blankVal = document.getElementById("blankVal");
  const choicesEl = document.getElementById("choices");
  const statusText = document.getElementById("statusText");
  const newBtn = document.getElementById("newBtn");
  const nextBtn = document.getElementById("nextBtn");

  let correct = null;
  let locked = false;

  function randInt(min, maxInclusive){
    return Math.floor(Math.random() * (maxInclusive - min + 1)) + min;
  }

  function pickOperation(){
    const m = modeSel.value;
    if(m === "add") return "+";
    if(m === "sub") return "‚àí";
    return (Math.random() < 0.5) ? "+" : "‚àí";
  }

  function buildQuestion(){
    locked = false;
    nextBtn.disabled = true;
    blankVal.textContent = "?";
    statusText.textContent = "Tap the correct answer.";
    const max = Number(rangeSel.value);

    const op = pickOperation();
    let a = randInt(1, max);
    let b = randInt(1, max);

    // Keep subtraction non-negative (calm + predictable)
    if(op === "‚àí" && b > a){
      const t = a; a = b; b = t;
    }

    correct = (op === "+") ? (a + b) : (a - b);

    aVal.textContent = String(a);
    bVal.textContent = String(b);
    opVal.textContent = op;

    // Build 3 choices: correct + 2 plausible
    const set = new Set([correct]);
    while(set.size < 3){
      const wiggle = randInt(-3, 3);
      const cand = Math.max(0, correct + wiggle);
      if(cand !== correct) set.add(cand);
    }
    const arr = Array.from(set).sort(() => Math.random() - 0.5);

    choicesEl.innerHTML = "";
    arr.forEach(v => {
      const btn = document.createElement("button");
      btn.type = "button";
      btn.className = "choice";
      btn.textContent = String(v);
      btn.addEventListener("click", () => choose(btn, v));
      choicesEl.appendChild(btn);
    });
  }

  function disableChoices(){
    Array.from(choicesEl.querySelectorAll(".choice")).forEach(b => b.disabled = true);
  }

  function choose(btn, v){
    if(locked) return;
    if(v === correct){
      locked = true;
      btn.classList.add("good");
      blankVal.textContent = String(correct);
      statusText.textContent = "Nice! ‚≠ê Press Next when ready.";
      nextBtn.disabled = false;
      disableChoices();

      // reward star
      setStars(getStars() + 1);
    }else{
      btn.classList.add("bad");
      statusText.textContent = "Try again.";
      // keep options active (calm retry)
      setTimeout(() => btn.classList.remove("bad"), 450);
    }
  }

  newBtn.addEventListener("click", buildQuestion);
  nextBtn.addEventListener("click", buildQuestion);
  modeSel.addEventListener("change", buildQuestion);
  rangeSel.addEventListener("change", buildQuestion);

  // init
  buildQuestion();
})();
</script>

</body>
</html>
