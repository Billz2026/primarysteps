<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Handwriting Practice</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: var(--bg); /* Using website theme background color */
      color: var(--text); /* Text color from website theme */
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: var(--text);
    }
    .container {
      background-color: var(--panel); /* Background color from website theme */
      padding: 30px;
      border-radius: 10px;
      box-shadow: var(--shadow); /* Shadow from website theme */
      margin-top: 20px;
      display: inline-block;
      width: 80%;
    }
    #canvas {
      border: 2px dashed var(--border); /* Dashed border for the handwriting canvas */
      width: 100%;
      height: 200px;
      margin-top: 20px;
      background-color: var(--panel2); /* Light background for tracing */
    }
    .word-display {
      font-size: 32px;
      font-weight: bold;
      color: var(--text);
      margin-top: 20px;
    }
    .feedback {
      margin-top: 20px;
      font-size: 18px;
      color: var(--ok);
    }
    .reset-btn, .next-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: var(--primary); /* Primary color from website theme */
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 18px;
    }
    .reset-btn:hover, .next-btn:hover {
      background-color: var(--primary2); /* Hover effect for the button */
    }
    .next-btn {
      background-color: var(--ok); /* Green for the Next button */
    }
    .next-btn:hover {
      background-color: var(--ok);
    }
  </style>
</head>
<body>

  <h1>Handwriting Practice</h1>
  <div class="container">
    <h3>Trace the word below:</h3>
    <div id="word-display" class="word-display">apple</div>
    <canvas id="canvas"></canvas>
    <div id="feedback" class="feedback"></div>
    <button class="reset-btn" onclick="resetCanvas()">Reset</button>
    <button class="next-btn" onclick="nextWord()">Next Word</button>
  </div>

  <script>
    const wordsList = [
      "apple", "ball", "cat", "dog", "elephant", "fish", "grape", "hat", "ice", "jug",
      "kite", "lion", "moon", "nest", "orange", "pen", "queen", "rose", "sun", "tree",
      "umbrella", "van", "water", "xylophone", "yellow", "zebra", "ant", "bear", "cup", "duck",
      "egg", "flower", "goat", "house", "island", "jellyfish", "key", "leaf", "mouse", "night",
      "open", "penguin", "quiet", "river", "star", "tiger", "unicorn", "vulture", "whale", "yarn"
    ];

    let currentWordIndex = 0;
    let isDrawing = false;
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const wordDisplay = document.getElementById('word-display');
    const feedback = document.getElementById('feedback');

    // Set canvas size
    canvas.width = 400;
    canvas.height = 200;

    // Initialize word display
    wordDisplay.textContent = wordsList[currentWordIndex];

    // Event listeners for drawing
    canvas.addEventListener('mousedown', startDrawing);
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('mouseup', stopDrawing);
    canvas.addEventListener('mouseout', stopDrawing);

    function startDrawing(event) {
      isDrawing = true;
      ctx.beginPath();
      ctx.moveTo(event.offsetX, event.offsetY);
    }

    function draw(event) {
      if (isDrawing) {
        ctx.lineTo(event.offsetX, event.offsetY);
        ctx.stroke();
      }
    }

    function stopDrawing() {
      isDrawing = false;
    }

    function resetCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height); // Clears the canvas
      feedback.textContent = ""; // Reset feedback
    }

    function nextWord() {
      const word = wordsList[currentWordIndex];
      // Check if the user has written the correct word (simple check for now)
      if (isWordCorrect()) {
        feedback.textContent = "Great job! You traced the word correctly!";
      } else {
        feedback.textContent = "Try again! Keep practicing.";
      }
      
      // Proceed to the next word
      currentWordIndex = (currentWordIndex + 1) % wordsList.length;
      wordDisplay.textContent = wordsList[currentWordIndex];
      resetCanvas(); // Reset canvas for next word
    }

    function isWordCorrect() {
      // Placeholder function: Implement word-checking logic here
      // Currently, this just checks if the canvas is not empty.
      return canvas.width > 0;
    }

  </script>

</body>
</html>
