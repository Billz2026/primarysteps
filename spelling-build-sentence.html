<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Build the Sentence • Primary Steps</title>
<style>
:root{
  --bg:#0b0d12;
  --panel:#121621;
  --panel2:#0f1320;
  --text:#eef2ff;
  --muted:#a9b2c7;
  --brand:#7dd3fc;
  --brand2:#a78bfa;
  --primary: #7dd3fc;
  --primary2:#a78bfa;
  --ok:#34d399;
  --bad:#fb7185;
  --ring:rgba(125,211,252,.30);
  --shadow: 0 12px 40px rgba(0,0,0,.35);
  --shadow2: 0 8px 18px rgba(0,0,0,.25);
  --radius:18px;
  --glass: rgba(18,22,33,.75);
  --border: rgba(255,255,255,.09);
}

/* Accessibility toggles */
[data-contrast="high"]{
  --bg:#00040b;
  --panel:#0b1020;
  --panel2:#070b16;
  --text:#ffffff;
  --muted:#d7ddf0;
  --brand:#bfe6ff;
  --brand2:#d2c6ff;
  --ring:rgba(191,230,255,.38);
  --border: rgba(255,255,255,.14);
}
[data-font="dyslexic"]{
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
  letter-spacing: .01em;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  background:
    radial-gradient(900px 500px at 20% 0%, rgba(167,139,250,.16), transparent 60%),
    radial-gradient(900px 500px at 85% 20%, rgba(125,211,252,.18), transparent 60%),
    var(--bg);
  color:var(--text);
  line-height:1.35;
}
a{color:inherit}
.container{max-width:1150px;margin:0 auto;padding:0 18px}

/* Header */
header{
  position:sticky; top:0; z-index:50;
  backdrop-filter:saturate(140%) blur(12px);
  background: rgba(18,22,33,.70);
  border-bottom:1px solid rgba(255,255,255,.08);
}
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; padding:12px 0;
}
.brand{
  display:flex; align-items:center; gap:12px; min-width: 240px;
  text-decoration:none;
}
.brand img{
  height:54px; width:auto; display:block;
  filter: drop-shadow(0 16px 30px rgba(125,211,252,.12));
}
.brand .name{display:flex; flex-direction:column; gap:2px}
.brand .name b{font-size:14px; letter-spacing:.02em}
.brand .name span{font-size:12px;color:var(--muted)}

nav{
  display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:flex-end;
}
.pill{
  appearance:none; border:1px solid rgba(255,255,255,.10);
  background: rgba(15,19,32,.72);
  color:var(--text);
  padding:10px 12px;
  border-radius:999px;
  font-weight:750;
  font-size:13px;
  cursor:pointer;
  transition: transform .12s ease, filter .12s ease, border-color .12s ease;
  text-decoration:none;
  display:inline-flex; align-items:center; gap:8px;
  box-shadow: var(--shadow2);
}
.pill:hover{filter:brightness(1.06); transform:translateY(-1px); border-color: rgba(125,211,252,.20)}
.pill.primary{
  background: linear-gradient(180deg, rgba(125,211,252,.38), rgba(167,139,250,.24));
  border-color: rgba(125,211,252,.32);
}
.icon{width:18px; height:18px; display:inline-block}

/* Hero */
.hero{padding:18px 0 8px}
.heroCard{
  border-radius: 22px;
  background: linear-gradient(180deg, rgba(18,22,33,.92), rgba(11,13,18,.75));
  border:1px solid rgba(255,255,255,.09);
  box-shadow: var(--shadow);
  padding:18px;
  display:grid;
  grid-template-columns: 1.25fr .75fr;
  gap:16px;
  overflow:hidden;
  position:relative;
}
.heroCard:before{
  content:"";
  position:absolute; inset:-2px;
  background:
    radial-gradient(520px 220px at 18% 14%, rgba(125,211,252,.14), transparent 60%),
    radial-gradient(520px 220px at 85% 0%, rgba(167,139,250,.12), transparent 60%);
  pointer-events:none;
}
.heroLeft,.heroRight{position:relative}
.hero h1{margin:0 0 8px; font-size: clamp(22px, 2.5vw, 32px); letter-spacing:-.02em}
.hero p{margin:0 0 14px; color:var(--muted); font-size:14px; max-width:60ch}

.quickRow{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
.searchWrap{
  display:flex; align-items:center; gap:10px;
  background: rgba(15,19,32,.85);
  border:1px solid rgba(255,255,255,.10);
  border-radius: 999px;
  padding:10px 12px;
  box-shadow: var(--shadow2);
  width:min(520px, 100%);
}
.searchWrap:focus-within{border-color: rgba(125,211,252,.38); box-shadow: 0 0 0 5px var(--ring)}
.searchWrap input{
  border:none; outline:none; background:transparent;
  width:100%; font-size:14px; color:var(--text);
}
.hint{font-size:12px; color:var(--muted)}
.heroRight{
  display:flex; flex-direction:column; gap:10px; align-items:stretch; justify-content:center;
}
.mini{
  background: rgba(15,19,32,.62);
  border:1px solid rgba(255,255,255,.08);
  border-radius: var(--radius);
  padding:12px 12px;
  box-shadow: var(--shadow2);
}
.mini b{display:block; font-size:13px}
.mini span{display:block; font-size:12px; color:var(--muted); margin-top:4px}

/* Section controls */
.controls{
  display:flex; gap:10px; flex-wrap:wrap; align-items:center;
  margin:16px 0 12px;
}
.chipGroup{display:flex; gap:8px; flex-wrap:wrap}
.chip{
  appearance:none; border:1px solid rgba(255,255,255,.10);
  background: rgba(15,19,32,.62);
  color:var(--text);
  padding:8px 10px;
  border-radius:999px;
  font-weight:750;
  font-size:12px;
  cursor:pointer;
  transition: transform .12s ease, filter .12s ease, border-color .12s ease;
}
.chip:hover{transform:translateY(-1px); filter:brightness(1.06); border-color: rgba(125,211,252,.20)}
.chip[aria-pressed="true"]{
  background: rgba(125,211,252,.14);
  border-color: rgba(125,211,252,.24);
}

/* Grid */
main{padding: 10px 0 40px}
.grid{
  display:grid;
  grid-template-columns: repeat(12, 1fr);
  gap:14px;
}
.card{
  grid-column: span 4;
  background: linear-gradient(180deg, rgba(18,22,33,.92), rgba(11,13,18,.75));
  border:1px solid rgba(255,255,255,.09);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 16px 16px;
  text-decoration:none;
  transition: transform .14s ease, filter .14s ease, border-color .14s ease;
  display:flex; gap:12px; align-items:flex-start;
  min-height: 112px;
  position:relative;
  overflow:hidden;
}
.card::before{
  content:"";
  position:absolute; inset:-120px -120px auto auto;
  width:240px;height:240px;border-radius:50%;
  background: radial-gradient(circle at 30% 30%, rgba(125,211,252,.18), transparent 62%);
  transform: rotate(10deg);
  pointer-events:none;
}
.card:hover{
  transform: translateY(-3px);
  filter:brightness(1.04);
  border-color: rgba(125,211,252,.20);
}
.badge{
  width:44px; height:44px; border-radius:14px;
  display:grid; place-items:center;
  background: rgba(125,211,252,.14);
  border:1px solid rgba(125,211,252,.20);
  flex:0 0 auto;
}
.badge svg{width:22px;height:22px}
.card h3{margin:0; font-size:15px; letter-spacing:-.01em}
.card p{margin:6px 0 0; color:var(--muted); font-size:12.5px}
.meta{margin-top:10px; display:flex; gap:8px; flex-wrap:wrap}
.tag{
  font-size:11px; font-weight:800;
  padding:6px 8px; border-radius:999px;
  background: rgba(15,19,32,.65);
  border: 1px solid rgba(255,255,255,.08);
  color: var(--muted);
}
.empty{
  display:none;
  margin-top:14px;
  padding:14px;
  border-radius: var(--radius);
  background: rgba(15,19,32,.62);
  border:1px dashed rgba(255,255,255,.18);
  color: var(--muted);
}
.empty.show{display:block}

/* Footer */
footer{
  border-top:1px solid rgba(255,255,255,.08);
  padding:22px 0 26px;
  color: var(--muted);
  font-size:12px;
}

/* Responsive */
@media (max-width: 900px){
  .heroCard{grid-template-columns: 1fr; padding:16px}
  .card{grid-column: span 6}
  .brand{min-width:auto}
}
@media (max-width: 560px){
  .brand img{height:58px;}
  .topbar{gap:8px}
  nav{gap:8px}
  .pill{padding:9px 11px}
  .card{grid-column: span 12}
  .searchWrap{padding:9px 11px}
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{scroll-behavior:auto !important}
  .card,.pill,.chip{transition:none !important}
  .card:hover,.pill:hover,.chip:hover{transform:none !important}
}

/* Focus */
a:focus-visible, button:focus-visible, input:focus-visible{
  outline:none;
  box-shadow: 0 0 0 6px var(--ring);
  border-radius: 12px;
}

.tileRow{display:flex; flex-wrap:wrap; gap:10px}
.tile{
  padding:10px 14px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.03);
  font-weight:950;
  cursor:pointer;
}
.tile:hover{background:rgba(255,255,255,.05)}
.tile.used{opacity:.45; cursor:default}
.sentenceBox{
  border:1px solid var(--line);
  border-radius:18px;
  padding:14px;
  background: rgba(255,255,255,.03);
}
.sentenceBox .label{color:var(--muted); font-size:12px; font-weight:900; margin-bottom:8px}
.sentence{font-size:22px; font-weight:950; letter-spacing:-.2px; line-height:1.35}
@media (max-width: 820px){ .sentence{font-size:18px} }

</style>
</head>
<body>
<header>
  <div class="container">
    <div class="topbar">
      <a class="brand" href="index.html" aria-label="Primary Steps home">
        <img src="assets/primary-steps-logo.png" alt="Primary Steps logo" />
        <div class="name">
          <b>Primary Steps</b>
          <span>Simple, calm learning activities</span>
        </div>
      </a>

      <nav aria-label="Top navigation">
        <a class="pill" href="progress.html" title="View stars and progress">
          <span class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2l2.9 6.3 6.8.6-5.1 4.4 1.6 6.6L12 16.9 5.8 19.9l1.6-6.6-5.1-4.4 6.8-.6L12 2z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
            </svg>
          </span>
          Progress
        </a>
        <a class="pill" href="settings.html">
          <span class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z" stroke="currentColor" stroke-width="1.8"/>
              <path d="M19.4 15a7.9 7.9 0 0 0 .1-1 7.9 7.9 0 0 0-.1-1l2-1.5-2-3.5-2.4 1a7.4 7.4 0 0 0-1.7-1l-.4-2.6H9.1L8.7 6a7.4 7.4 0 0 0-1.7 1l-2.4-1-2 3.5 2 1.5a7.9 7.9 0 0 0-.1 1 7.9 7.9 0 0 0 .1 1l-2 1.5 2 3.5 2.4-1a7.4 7.4 0 0 0 1.7 1l.4 2.6h5.8l.4-2.6a7.4 7.4 0 0 0 1.7-1l2.4 1 2-3.5-2-1.5z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
            </svg>
          </span>
          Settings
        </a>
        <button class="pill primary" id="toggleContrast" type="button" title="Toggle high contrast">
          <span class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 3a9 9 0 1 0 0 18V3z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
              <path d="M12 3v18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </span>
          Contrast
        </button>
      </nav>
    </div>

    <section class="hero">
      <div class="heroCard" role="region" aria-label="Welcome">
        <div class="heroLeft">
          <h1>Pick an activity and start learning</h1>
          <p>
            Simple, calm learning activities—pick a section below to begin.
          </p>

          <div class="quickRow">
            <div class="searchWrap" role="search">
              <span class="icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z" stroke="currentColor" stroke-width="1.8"/>
                  <path d="M16.2 16.2L21 21" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                </svg>
              </span>
              <input id="search" type="search" placeholder="Search activities (e.g., letters, time, tracing)" autocomplete="off" />
            </div>
            <span class="hint" id="resultHint" aria-live="polite"></span>
          </div>

          <div class="controls" aria-label="Quick filters">
            <div class="chipGroup" role="group" aria-label="Age group">
              <button class="chip" type="button" data-filter="age" data-value="reception" aria-pressed="false">Reception</button>
              <button class="chip" type="button" data-filter="age" data-value="year1" aria-pressed="false">Year 1</button>
              <button class="chip" type="button" data-filter="age" data-value="year2" aria-pressed="false">Year 2</button>
            </div>
            <div class="chipGroup" role="group" aria-label="Difficulty">
              <button class="chip" type="button" data-filter="level" data-value="easy" aria-pressed="false">Easy</button>
              <button class="chip" type="button" data-filter="level" data-value="medium" aria-pressed="false">Medium</button>
              <button class="chip" type="button" data-filter="level" data-value="hard" aria-pressed="false">Hard</button>
            </div>
            <button class="chip" type="button" id="toggleFont" aria-pressed="false" title="Toggle dyslexia-friendly spacing">
              Dyslexia-friendly
            </button>
            <button class="chip" type="button" id="clearFilters" title="Clear filters">Clear</button>
          </div>
        </div>

        <div class="heroRight" aria-label="Tips">
          <div class="mini">
            <b>Parent tip</b>
            <span>Try 5–10 minutes per activity. Stop while it’s still fun.</span>
          </div>
          <div class="mini">
            <b>Sound ready</b>
            <span>Use Settings to turn sounds on/off when you add audio later.</span>
          </div>
          <div class="mini">
            <b>Progress</b>
            <span>Stars can be stored on this device (no login needed).</span>
          </div>
        </div>
      </div>
    </section>
  </div>
</header>

<section class="hero">
  <div class="container">
    <div class="heroCard">
      <div class="row" style="justify-content:space-between;align-items:center;">
        <div>
          <h1 style="margin:0">Build the Sentence</h1>
          <p class="lead" style="margin-top:6px">Tap the word tiles in order to make a correct sentence. Tap a tile in your sentence to remove it.</p>
        </div>
        <a class="btn" href="spelling.html">Back</a>
      </div>
    </div>
  </div>
</section>

<section class="container" style="padding-bottom:22px;">
  <div class="grid two" style="grid-template-columns: 2fr 1fr;">
    <div class="card">
      <div class="head">
        <div class="pill" id="countPill2">1 / 25</div>
        <div class="row">
          <button class="btn" id="soundBtn2" type="button" aria-pressed="false">Sound: Off</button>
          <button class="btn primary" id="newBtn2" type="button">New</button>
          <button class="btn" id="resetBtn2" type="button">Reset</button>
        </div>
      </div>
      <div class="body">
        <div class="sentenceBox">
          <div class="label">Your sentence</div>
          <div class="sentence" id="built">Tap tiles below…</div>
        </div>

        <div class="tray" style="margin-top:14px;">
          <div class="row" style="justify-content:space-between;">
            <strong style="font-weight:950">Word tiles</strong>
            <span class="pill" id="remaining">0 left</span>
          </div>
          <div class="tileRow" id="tiles" style="margin-top:10px;"></div>
        </div>

        <div class="row" style="margin-top:12px;">
          <button class="btn good" id="checkBtn2" type="button">Check</button>
          <button class="btn" id="hintBtn2" type="button">Hint</button>
          <button class="btn" id="clearBtn2" type="button">Clear</button>
        </div>

        <div class="msg" id="msg2">Tip: Start with a capital word like “I” or “The”.</div>
      </div>
    </div>

    <div class="card">
      <div class="head"><div class="pill">Difficulty</div></div>
      <div class="body">
        <div class="row">
          <button class="btn on" id="easyBtn2" type="button">Easy</button>
          <button class="btn" id="medBtn2" type="button">Medium</button>
          <button class="btn" id="hardBtn2" type="button">Hard</button>
        </div>

        <div class="msg" style="margin-top:14px;">
          Easy sentences are short. Hard sentences have more words and trickier order.
        </div>
      </div>
    </div>
  </div>
</section>


<script>
(() => {
  const $ = (id)=>document.getElementById(id);
  const ui = {
    built:$('built'),
    tiles:$('tiles'),
    remaining:$('remaining'),
    msg:$('msg2'),
    countPill:$('countPill2'),
    soundBtn:$('soundBtn2'),
    newBtn:$('newBtn2'),
    resetBtn:$('resetBtn2'),
    checkBtn:$('checkBtn2'),
    hintBtn:$('hintBtn2'),
    clearBtn:$('clearBtn2'),
    easyBtn:$('easyBtn2'),
    medBtn:$('medBtn2'),
    hardBtn:$('hardBtn2'),
  };

  let soundOn=false, audioCtx=null;
  function beep(freq=700, ms=70, gain=0.03){
    if(!soundOn) return;
    if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const o=audioCtx.createOscillator(), g=audioCtx.createGain();
    o.frequency.value=freq; g.gain.value=gain;
    o.connect(g); g.connect(audioCtx.destination);
    o.start(); setTimeout(()=>o.stop(), ms);
  }
  function setMsg(type, html){
    ui.msg.className = 'msg' + (type ? ' ' + type : '');
    ui.msg.innerHTML = html;
  }
  const shuffle=(arr)=>{ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; };

  const BANK = {"easy": ["I like cats .", "The dog can run .", "We read a book .", "My hat is red .", "I can see the sun .", "The frog can jump .", "We go to school .", "The cake is sweet .", "I have two shoes .", "The car is fast .", "We wash our hands .", "The sky is blue ."], "medium": ["I can write my name neatly .", "The yellow jacket is warm .", "We will walk to the park .", "Please switch the lights off .", "The puppy drank from the bowl .", "The bright rainbow filled the sky .", "The kitten was very playful today .", "Put the toys in the basket .", "The thunder was loud last night .", "The snowman is melting quickly ."], "hard": ["Please follow the instructions carefully today .", "The explorer discovered a hidden treasure .", "The teacher praised her effort in class .", "The photographer adjusted the camera settings .", "The mountain path was very dangerous .", "We practised our handwriting after lunch .", "The scientist recorded the results accurately .", "He showed great courage during the storm .", "The artist added the final details slowly .", "The driver stopped at the traffic signals ."]};

  let diff='easy';
  let list=[], idx=0;
  let targetWords=[], pool=[], built=[];

  function norm(s){ return (s||'').trim().replace(/\s+/g,' '); }

  function loadList(){
    list = shuffle(BANK[diff].slice()).slice(0, 25);
    idx = 0;
  }

  function setup(){
    const sentence = list[idx];
    ui.countPill.textContent = (idx+1) + ' / ' + list.length;
    targetWords = sentence.split(' ');
    pool = shuffle(targetWords.slice());
    built = [];
    render();
    setMsg('', 'Tap the tiles to build the sentence.');
  }

  function render(){
    ui.built.textContent = built.length ? built.join(' ') : 'Tap tiles below…';
    ui.tiles.innerHTML = '';
    // show tiles; when used, they still show but dim
    pool.forEach((w, i)=>{
      const used = built.filter(x=>x.__i===i).length>0;
    });

    const usedIdx = new Set(built.map(x=>x.i));
    pool.forEach((w, i)=>{
      const b=document.createElement('button');
      b.type='button';
      b.className = 'tile' + (usedIdx.has(i) ? ' used' : '');
      b.textContent = w;
      b.addEventListener('click', ()=>{
        if(usedIdx.has(i)) return;
        built.push({w, i});
        beep(640,45,0.02);
        render();
      });
      ui.tiles.appendChild(b);
    });

    ui.remaining.textContent = (targetWords.length - built.length) + ' left';

    // allow removing by tapping sentence
    ui.built.onclick = ()=>{};
  }

  ui.built.addEventListener('click', ()=>{
    // remove last word for simplicity
    if(!built.length) return;
    built.pop();
    beep(520,45,0.02);
    render();
  });

  function builtSentence(){ return built.map(x=>x.w).join(' '); }

  ui.checkBtn.addEventListener('click', ()=>{
    const guess = builtSentence();
    const correct = norm(list[idx]);
    if(norm(guess) === correct){
      setMsg('good', '✅ Correct! Tap <strong>New</strong> for another.');
      beep(880,90,0.04);
    } else {
      setMsg('bad', 'Not quite. Keep going — you can tap your sentence to remove the last word.');
      beep(220,120,0.05);
    }
  });

  ui.hintBtn.addEventListener('click', ()=>{
    const correct = list[idx];
    setMsg('', 'Hint: starts with <strong>' + targetWords[0] + '</strong>');
    beep(740,60,0.03);
  });

  ui.clearBtn.addEventListener('click', ()=>{
    built = [];
    setMsg('', 'Cleared. Try again.');
    beep(520,60,0.02);
    render();
  });

  function next(){
    idx = (idx + 1) % list.length;
    setup();
    beep(740,50,0.02);
  }

  ui.newBtn.addEventListener('click', next);
  ui.resetBtn.addEventListener('click', ()=>{ loadList(); setup(); setMsg('', 'Reset done.'); beep(520,60,0.02); });

  function setDiff(d){
    diff=d;
    ui.easyBtn.classList.toggle('on', d==='easy');
    ui.medBtn.classList.toggle('on', d==='medium');
    ui.hardBtn.classList.toggle('on', d==='hard');
    loadList();
    setup();
  }

  ui.soundBtn.addEventListener('click', ()=>{
    soundOn=!soundOn;
    ui.soundBtn.setAttribute('aria-pressed', String(soundOn));
    ui.soundBtn.textContent = 'Sound: ' + (soundOn ? 'On' : 'Off');
    beep(880,60,0.03);
  });

  ui.easyBtn.addEventListener('click', ()=> setDiff('easy'));
  ui.medBtn.addEventListener('click', ()=> setDiff('medium'));
  ui.hardBtn.addEventListener('click', ()=> setDiff('hard'));

  setDiff('easy');
})();
</script>

</body>
</html>
